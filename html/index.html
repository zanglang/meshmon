$def with (files, interval)
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="iamrice.css" media="screen" rel="Stylesheet" type="text/css" />
<title>Insert title here</title>
<style>
</style>
<script type="text/javascript" src="prototype.js"></script>
<script type="text/javascript" src="builder.js"></script>
<script type="text/javascript" src="effects.js"></script>
<script type="text/javascript">
	var files = $:files
	var images = []
	var interval = $interval
	var timer = null;
	
	function init() {
		imagesDiv = \$('sidebar');
			files.each(function(file) {
				var ele = Builder.node('div', { id: file }, [
				Builder.node('img', {
					src: 'web/collapsed.gif',
					onclick: 'expand(\'' + file + '\')'
				}),
				' ' + file,
				Builder.node('br'),
				Builder.node('div', [
					Builder.node('img', {
						src: 'images/' + file + '.png'
					})
				])
			]);
			ele.childNodes[3].hide()
			imagesDiv.appendChild(ele)
			images.push(ele);
		});
		\$('weathermap').src = 'images/weathermap.png';
		timer = setTimeout('refresh()', interval);
	}
	
	function refresh() {
		var rand = Math.round(Math.random()*10000000000);
		images.each(function(img, index) {
			arrow = img.childNodes[0];
			if (!arrow.expanded || arrow.expanded == undefined)
				return;
			img.childNodes[3].childNodes[0].src = 'images/' + files[index] + '.png?rand=' + rand;
		});
		\$('weathermap').src = 'images/weathermap.png?rand=' + rand;
		timer = setTimeout('refresh()', interval);
	}
	
	function changeInterval() {
		var ele = \$('intervals');
		interval = (ele[ele.selectedIndex]).value * 1000;
		if (timer != null)
			clearTimeout(timer);
		
		\$('mainform').action = 'update?interval=' + interval
		\$('mainform').submit()
	}
	
	function changeView() {
		var ele = \$('statistics');
		view = (ele[ele.selectedIndex]).value
		if (timer != null)
			clearTimeout(timer);
		
		\$('mainform').action = 'update?view=' + view
		\$('mainform').submit()
	}
	
	function expand(id) {
		ele = \$(id)
		arrow = ele.childNodes[0]
		img = ele.childNodes[3]
		//alert(img.childNodes[0])
		if (arrow.expanded || arrow.expanded == undefined) {
			arrow.src = 'web/collapsed.gif';
			arrow.expanded = false;
			img.hide()
			//new Effect.BlindUp(img)
		}
		else {
			arrow.src = 'web/expanded.gif';
			arrow.expanded = true
			img.show()
			//new Effect.BlindDown(img)
		}
	}
</script>
</head>
<body onload="init()">
<form id='mainform' method='POST' />
<div id="container" class="clearfix"><br />
<br />
<div id="content" class="clearfix">
<div id="main">
<img id="weathermap" />
<br/>
<br/>
Refresh interval:<br/>
<select id="intervals" onchange="changeInterval()">
	<option>---</option>
	<option value="1">1</option>
	<option value="5">5</option>
	<option value="10">10</option>
	<option value="30">30</option>
	<option value="60">60</option>
</select>
<br/><br/>
Statistics View:<br/>
<select id="statistics" onchange="changeView()">
	<option>---</option>
	<option value="0">Traffic</option>
	<option value="1">Wireless Signal</option>
</select>
</div>
<div id="sidebar">
	<br/>
	<h3 align='center'><b>Traffic Images<b></h3>
	<br/>
	<div id='images'>
	</div>
</div>
</div>
</div>

</body>
</html>